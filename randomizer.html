<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Многофункциональная Майя</title>
    <link
            rel="icon"
            href="https://email-images.mindbox.ru/TJ/b6f00fe0-3e8c-444f-8c1a-a18857d960f3/69c46e6e-9e0d-460f-863e-811ad835b982.jpg"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
  <div class="header">
    <img
            src="https://email-images.mindbox.ru/TJ/b6f00fe0-3e8c-444f-8c1a-a18857d960f3/69c46e6e-9e0d-460f-863e-811ad835b982.jpg"
            alt=""
            class="icon"
    />
      <div>
        <p>Создает рандом-ссылку</p>
      </div>
    </div>

    <div
      id="editableDiv"
      contenteditable="true"
      spellcheck="false"
      autocorrect="off"
    ></div>

    <script>
      window.addEventListener("load", () => {
        document.getElementById("editableDiv").focus();
      });

      function processText(text) {
        text = text.replace(/https:\/\/t-j.ru/g, '');
        text = text.replace(/\n/g, '~');

        text = window.btoa(text);
        return 'http://adsuumus.github.io/random.html#' + text;
      }

      document
        .getElementById("editableDiv")
        .addEventListener("paste", (event) => {
          event.preventDefault();
          const clipboardData = (
            event.clipboardData || window.clipboardData
          ).getData("text/plain");
          if (clipboardData) {
            const processedText = processText(clipboardData);
            document.getElementById("editableDiv").textContent = processedText;
          }
        });
    </script>
  </body>
</html>
