<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>random</title>
    <style></style>
  </head>
  <body>
    <div class="header">
    <script>
      // записываем все, что после # в переменную
      let hash = window.location.hash.slice(1);

      // запишем ЮТМ и почистим строку
      let utm = "";
      if (hash.includes("?utm")) {
        const utmIndex = hash.indexOf("?utm");
        utm = hash.substring(utmIndex);
        hash = hash.substring(0, utmIndex);
      }

      // расшифровываем
      const decodedUrls = window.atob(hash);
      
      // собираем массив из переменной, элементы делит знак ~
      const urlList = decodedUrls.split('~').filter(Boolean);

      const randomIndex = Math.floor(Math.random() * urlList.length);
      let randomUrl = urlList[randomIndex];

      // добавим адрес, если он был удален
      if (!randomUrl.includes('.ru')) {
        randomUrl = 'https://t-j.ru' + randomUrl;
      }

      window.location.href = randomUrl + utm;
    </script>
   </div>
  </body>
</html>
